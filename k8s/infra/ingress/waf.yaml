apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: waf
spec:
  interval: 24h
  chart:
    spec:
      chart: appchart
      version: 1.7.0
      sourceRef:
        kind: HelmRepository
        name: appchart
        namespace: flux-system
      interval: 1h
  values:
    apps:
      - name: dummy
        image: traefik/whoami@sha256:200689790a0a0ea48ca45992e0450bc26ccab5307375b41c84dfc4f2475937ab
        service: 80
      - name: waf
        image: owasp/modsecurity-crs:4.22.0-nginx-202601060501@sha256:5d184e8272e86217081483fb57f605d9d525403921d716d4eebcb3adbfa2fdac
        service: 8080
        env:
        - name: BLOCKING_PARANOIA
          value: "1"
        - name: ANOMALY_INBOUND
          value: "5"
        - name: ANOMALY_OUTBOUND
          value: "5"
        - name: BACKEND
          value: "http://dummy"