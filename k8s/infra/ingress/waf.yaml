apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: waf
spec:
  interval: 24h
  chart:
    spec:
      chart: appchart
      version: 1.7.0
      sourceRef:
        kind: HelmRepository
        name: appchart
        namespace: flux-system
      interval: 1h
  values:
    apps:
      - name: dummy
        image: traefik/whoami
        service: 80
      - name: waf
        image: owasp/modsecurity-crs:4.22.0-nginx-202601060501
        service: 8080
        env:
        - name: BLOCKING_PARANOIA
          value: "1"
        - name: ANOMALY_INBOUND
          value: "5"
        - name: ANOMALY_OUTBOUND
          value: "5"
        - name: BACKEND
          value: "http://dummy"