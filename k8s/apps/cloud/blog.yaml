apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: cloud
spec:
  install:
    createNamespace: true
  interval: 24h
  chart:
    spec:
      chart: ./k8s/appchart
      version: "x.x.x"
      sourceRef:
        kind: GitRepository
        name: flux-system
        namespace: flux-system
      interval: 1h
  targetNamespace: cloud
  values:
    apps:
      - name: blog
        image: gitea.cocointhe.cloud/coco/k0rventen.github.io
        imagePullSecret: registry-creds
        service: 8080
        ingress:
          public: true
          domain: blog.cocointhe.cloud

      # - name: countdown
      #   image: gitea.cocointhe.cloud/coco/countdown
      #   imagePullSecret: registry-creds
      #   service: 8080

      - name: landingpage
        image: gitea.cocointhe.cloud/coco/landing-page
        service: 8080
        ingress:
          public: true
          domain: cocointhe.cloud

      - name: echo
        image: traefik/whoami@sha256:200689790a0a0ea48ca45992e0450bc26ccab5307375b41c84dfc4f2475937ab
        service: 80
        ingress:
          public: true
          domain: echo.cocointhe.cloud
